{% extends "base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/AdmCss/listaDeUsuarios.css'%}">

{% include "components/adm/menuAdm.html" %}

<div class="mainListaUsuarios">
    
    <div class="divPesquisa">
        <div class="barraPesquisa">
            <img src="{% static 'img/iconeLupa.png' %}" alt="">
            <input type="search" placeholder="Pesquisar usuário">
        </div>
    </div>

        <div class="primeiraLinha">

            <h1><span>Usu</span>ários</h1>

            <div class="botoesUsuario">
            
                    <button class="addMoedas" id="addMoedas">
                        <img src="{% static 'img/iconAdicionar.png' %}" alt="">
                        Adicionar moedas
                    </button>
          

                    <button class="addUsuarios" id="addUsuarios">
                        <img src="{% static 'img/iconAdicionar.png' %}" alt="">
                        Adicionar usuário
                    </button>
            
            </div>

        </div>

        <div class="head">
            <h3>Nome</h3>
            <img src="{% static 'img/lista.png' %}" alt="">
        </div>


        <div class="listaUsuarios">

            {% for usuario in usuarios %}

            
            {% if usuario.is_active %}
            
            <div class="linhaUsuario">
                <input type="checkbox" class="checkbox">
                <div class="infoUser">
                    <img src="{% static 'img/userBlack.png' %}" alt="">
                    <input type="text" class="idUser" value="{{usuario.id}}">
                    <span class="nome">{{usuario.first_name}}</span>
                    <span>D$ {{usuario.saldo}} </span>
                    <span class="status"></span>
                    
                </div>
                <img class="iconeEditar" id="editar"
                data-id="{{usuario.id}}"  src="{% static 'img/edit.png' %}" alt="">
            </div>
    

            {% else %}

                <div class="linhaUsuario desativado">
                    <input type="checkbox" class="checkbox" disabled>
                    <div class="infoUser">
                        <input type="text" class="idUser" value="{{usuario.id}}">
                        <img src="{% static 'img/userBlack.png' %}" alt="">
                        <span class="nome">{{usuario.first_name}}</span>
                        <span class="status">Desativado</span>
                    </div>
                    <img class="iconeEditar" id="editar" data-id="{{usuario.id}}"  src="{% static 'img/edit.png' %}" alt="">
                </div>


            {% endif %}

                <dialog id="editarUsuario-{{usuario.id}}" class="editarUsuario">
                    
                    <form class="formEditar">
                        {% csrf_token %}

                        <input type="hidden" class="idUser" value="{{usuario.id}}">

                        <input type="text" class="nome" value="{{usuario.first_name}}">

                        <input type="email" class="email" value="{{usuario.username}}">

                        <input type="number" class="ra" value="{{usuario.ra}}">

                        <input type="number" class="saldo" value="{{usuario.saldo}}">

                        <button class="desativar">Desativar Usuário</button>
                        <button class="ativar">Ativar Usuário</button>

                        <button type="submit">Concluído</button>

                    </form>

                </dialog>

            {% endfor%} 
        </div>
</div>

<dialog id="popupCadastrarUsuario" class="popupCadastrarUsuario">
    {% include "AdmHtml/cadastrarUsuario.html" %}
</dialog>

<dialog id="popupAdicionarMoedas" class="popupAdicionarMoedas">
    {% include "AdmHtml/adicionarMoedas.html" %}
</dialog>


<script src="{% static 'js/AdmJS/listaDeUsuarios.js' %}"></script>
{% endblock %}